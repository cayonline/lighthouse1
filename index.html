<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lighthouse Power</title>

<style>
body{
    margin:0;
    background:black;
    overflow:hidden;
    font-family:Arial, sans-serif;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
    color:white;
}

/* Wrapper spacing adjusted */
.wrapper{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:25px; /* smaller gap so button moves up */
}

/* Glitter Layer */
#glitterLayer{
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    pointer-events:none;
}

/* Flowing Glitter */
.glitter{
    position:absolute;
    border-radius:50%;
    opacity:0.95;
    animation:moveParticle 5s linear forwards;
}

@keyframes moveParticle{
    from{
        transform:translate(0,0);
        opacity:1;
    }
    to{
        transform:translate(var(--x), var(--y));
        opacity:0;
    }
}

/* Lighthouse */
.lighthouse{
    width:280px;
    height:450px;
}

/* Button */
button{
    padding:16px 40px;
    font-size:18px;
    font-weight:bold;
    border:none;
    border-radius:40px;
    background:linear-gradient(to right,#00ffff,#00aaff);
    cursor:pointer;
}

button:active{
    transform:scale(0.95);
}
</style>
</head>

<body>

<div id="glitterLayer"></div>

<div class="wrapper">

<div class="lighthouse">
<svg viewBox="0 0 200 400" width="100%" height="100%">

    <defs>
        <linearGradient id="powerGradient" x1="0" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="#00ffff"/>
            <stop offset="100%" stop-color="#ffffff"/>
        </linearGradient>
    </defs>

    <!-- Tower -->
    <path d="M70 380 L130 380 L120 150 L80 150 Z"
          fill="#eeeeee"/>

    <!-- Power fill -->
    <rect id="powerFill" x="80" y="380" width="40" height="0"
          fill="url(#powerGradient)" opacity="0.9"/>

    <!-- Stripes -->
    <rect x="70" y="250" width="60" height="20" fill="#00ffff"/>
    <rect x="70" y="200" width="60" height="20" fill="#00ffff"/>

    <!-- Lantern -->
    <rect x="60" y="120" width="80" height="40" fill="#222"/>
    <circle id="topLight" cx="100" cy="140" r="15"
            fill="#ffffff"/>

</svg>
</div>

<button onclick="lightUp()">LIGHT UP âœ¨</button>

</div>

<script>
let energy = 0;
let maxEnergy = 100;
let glitterStarted = false;

/* Rainbow color palette */
const colors = [
    "#00ffff", // cyan
    "#ffd700", // gold
    "#ff4dff", // pink
    "#a64dff", // purple
    "#3399ff", // blue
    "#ff9933", // orange
    "#ffffff"  // white
];

function lightUp(){

    if(energy < maxEnergy){
        energy += 5;
        if(energy > maxEnergy) energy = maxEnergy;
        updatePower();
    }

    if(energy >= maxEnergy && !glitterStarted){
        glitterStarted = true;
        startGlitterStorm();
    }
}

function updatePower(){

    let percent = energy / maxEnergy;
    let fillHeight = 230 * percent;
    let fillY = 380 - fillHeight;

    let fill = document.getElementById("powerFill");
    fill.setAttribute("height", fillHeight);
    fill.setAttribute("y", fillY);

    document.querySelector(".lighthouse svg")
        .style.filter =
        "drop-shadow(0 0 " + (20 + percent*80) + "px rgba(0,255,255," + (0.5+percent*0.5) + "))";
}

/* Glitter from all directions */
function startGlitterStorm(){

    setInterval(()=>{
        createParticles(10);
    },200);
}

function createParticles(amount){

    let layer = document.getElementById("glitterLayer");

    for(let i=0;i<amount;i++){

        let size = 20 + Math.random()*40;
        let color = colors[Math.floor(Math.random()*colors.length)];

        let p = document.createElement("div");
        p.className = "glitter";

        p.style.width = size+"px";
        p.style.height = size+"px";
        p.style.background = "radial-gradient(circle,"+color+",transparent)";
        p.style.boxShadow = "0 0 35px "+color;

        let startX = Math.random()*window.innerWidth;
        let startY = Math.random()*window.innerHeight;

        p.style.left = startX + "px";
        p.style.top = startY + "px";

        let moveX = (Math.random()-0.5)*700;
        let moveY = (Math.random()-0.5)*700;

        p.style.setProperty('--x', moveX+"px");
        p.style.setProperty('--y', moveY+"px");

        layer.appendChild(p);

        setTimeout(()=>p.remove(),5000);
    }
}
</script>

</body>
</html>
